<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UMN IDSC 3103: Data Modeling and Databases Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --umn-maroon: #7a0019;
            --umn-gold: #ffcc33;
            --umn-gold-dark: #ffb81c;
        }
        .bg-umn-maroon { background-color: var(--umn-maroon); }
        .text-umn-maroon { color: var(--umn-maroon); }
        .border-umn-maroon { border-color: var(--umn-maroon); }
        .bg-umn-gold { background-color: var(--umn-gold); }
        .text-umn-gold { color: var(--umn-gold); }
        
        .option-card:hover { border-color: var(--umn-maroon); background-color: #fffaf0; }
        .selected { border-color: var(--umn-maroon); background-color: #fdf2f2; ring: 2px; ring-color: var(--umn-maroon); }
        
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700;800&display=swap');
        body { font-family: 'Open Sans', sans-serif; }
    </style>
</head>
<body class="bg-stone-100 min-h-screen">

    <!-- UMN Header Banner -->
    <div class="bg-umn-maroon text-white py-6 shadow-xl mb-8 border-b-4 border-umn-gold">
        <div class="max-w-4xl mx-auto px-6 flex items-center gap-6">
            <!-- Minnesota Block M -->
            <svg width="60" height="60" viewBox="0 0 100 100">
                <path d="M12 88 V12 H36 L50 42 L64 12 H88 V88 H74 V32 L50 68 L26 32 V88 H12Z" 
                      fill="var(--umn-gold)" 
                      stroke="white" 
                      stroke-width="2"/>
            </svg>
            <div>
                <h1 class="text-2xl font-black tracking-tight leading-none">IDSC 3103</h1>
                <p class="text-sm uppercase tracking-widest text-umn-gold font-bold mt-1">Data Modeling and Databases</p>
            </div>
        </div>
    </div>

    <div class="max-w-3xl mx-auto px-4 pb-20">
        <!-- Progress Tracking -->
        <div class="bg-white rounded-xl shadow-sm p-6 mb-6">
            <div class="flex justify-between items-end mb-4">
                <div>
                    <h2 class="text-xl font-bold text-slate-800">Database Design Logic</h2>
                    <p class="text-slate-500 text-xs uppercase font-bold tracking-tighter text-umn-maroon">Carlson School of Management</p>
                </div>
                <div class="text-right">
                    <span id="progress-text" class="text-sm font-black text-umn-maroon">Q 1 / 10</span>
                </div>
            </div>
            <div class="h-2 w-full bg-slate-100 rounded-full overflow-hidden">
                <div id="progress-bar" class="h-full bg-umn-maroon transition-all duration-700" style="width: 10%"></div>
            </div>
        </div>

        <!-- Quiz Area -->
        <div id="quiz-container">
            <div id="question-box" class="bg-white rounded-2xl shadow-xl p-8 border border-slate-200 mb-6 relative">
                <div id="category-label" class="inline-block bg-umn-gold text-umn-maroon text-[10px] font-black uppercase px-2 py-1 rounded mb-4">CATEGORY</div>
                <h2 id="scenario-text" class="text-xl font-bold text-slate-800 mb-6 leading-snug"></h2>
                
                <div id="options-list" class="space-y-3">
                    <!-- Options injected here -->
                </div>
            </div>

            <div class="flex justify-between items-center min-h-[60px]">
                <div id="feedback" class="font-bold text-lg italic"></div>
                <button id="next-btn" onclick="nextQuestion()" class="hidden bg-umn-maroon text-white px-10 py-3.5 rounded-lg font-bold hover:opacity-90 transition-all shadow-lg active:scale-95 border-b-4 border-red-900">
                    NEXT QUESTION &rarr;
                </button>
            </div>
        </div>

        <!-- Final Score View -->
        <div id="score-view" class="hidden bg-white rounded-3xl shadow-2xl p-12 text-center border-t-8 border-umn-maroon">
            <div class="w-20 h-20 bg-umn-gold rounded-full flex items-center justify-center mx-auto mb-6">
                 <svg width="40" height="40" viewBox="0 0 100 100">
                    <path d="M12 88 V12 H36 L50 42 L64 12 H88 V88 H74 V32 L50 68 L26 32 V88 H12Z" fill="var(--umn-maroon)"/>
                </svg>
            </div>
            <h2 class="text-3xl font-black text-slate-900 mb-2">Quiz Results</h2>
            <div class="text-7xl font-black text-umn-maroon my-6 tracking-tighter" id="final-score">0/10</div>
            <p id="score-message" class="text-slate-600 mb-8 text-lg max-w-sm mx-auto italic leading-relaxed"></p>
            <button onclick="location.reload()" class="bg-umn-maroon text-white px-12 py-4 rounded-xl font-bold hover:scale-105 transition-all shadow-xl">Try Again</button>
        </div>
    </div>

    <script>
        const questions = [
            {
                category: "Subtype Logic",
                scenario: "In a Supertype/Subtype hierarchy, what is the conceptual purpose of a 'Subtype Discriminator'?",
                options: [
                    "To store the primary key of the subtype",
                    "To determine which subtype an instance of the supertype belongs to",
                    "To link the associative entity to the supertype",
                    "To ensure that all subtypes have unique names"
                ],
                correct: 1
            },
            {
                category: "Relational Mapping",
                scenario: "When converting a 1:N relationship from a conceptual model to a relational table structure, where is the Foreign Key (FK) conceptually placed?",
                options: [
                    "In the Parent ('1' side) table to refer to many children",
                    "In the Child ('N' side) table to refer back to one parent",
                    "In both tables to ensure a bidirectional link",
                    "In a separate 'Link' table regardless of cardinality"
                ],
                correct: 1
            },
            {
                category: "Subtype Specialization",
                scenario: "If a business rule states that an Employee must be either a 'Full-Time' or 'Part-Time' worker, but never both, which constraint should be applied?",
                options: [
                    "Overlapping",
                    "Disjoint",
                    "Recursive",
                    "Partial Completeness"
                ],
                correct: 1
            },
            {
                category: "Attribute Types",
                scenario: "A 'Multivalued Attribute' (such as {Email}) is conceptually defined as an attribute that:",
                options: [
                    "Contains multiple sub-parts like Street, City, and State",
                    "May have more than one value for a single entity instance",
                    "Is calculated based on other attributes in the table",
                    "Is used as a foreign key in multiple tables"
                ],
                correct: 1
            },
            {
                category: "Associative Entities",
                scenario: "When should a M:N relationship be converted into an Associative Entity in the physical model?",
                options: [
                    "Only when the relationship has no attributes of its own",
                    "Always, because relational databases cannot directly implement M:N relationships",
                    "Only when the relationship is optional on both sides",
                    "Never; M:N relationships are handled via simple Foreign Keys in one table"
                ],
                correct: 1
            },
            {
                category: "Unary Relationships",
                scenario: "A 'Recursive' (Unary) relationship exists when:",
                options: [
                    "A table has two different primary keys",
                    "An entity has a relationship with itself (e.g., Employee manages Employee)",
                    "A subtype has its own subtype hierarchy",
                    "Two entities are linked by a composite key"
                ],
                correct: 1
            },
            {
                category: "Entity Integrity",
                scenario: "In the context of Primary Keys, the 'Entity Integrity' rule states that:",
                options: [
                    "A foreign key must match a primary key in another table",
                    "A primary key cannot contain a null value",
                    "An entity must have at least three attributes",
                    "A subtype must have the same name as its supertype"
                ],
                correct: 1
            },
            {
                category: "Degree of Relationships",
                scenario: "If an 'Order' must include at least one 'Product', but a 'Product' does not necessarily have to be part of any 'Order', the 'Product' side of the relationship has:",
                options: [
                    "Mandatory Cardinality",
                    "Optional Cardinality",
                    "Binary Cardinality",
                    "Composite Cardinality"
                ],
                correct: 1
            },
            {
                category: "Modeling Strategy",
                scenario: "In a conceptual ERD, why are Foreign Keys (FKs) generally excluded from the diagram?",
                options: [
                    "Because FKs are physical implementation details, not conceptual business rules",
                    "Because FKs are automatically created by all database software",
                    "Because PKs already contain the data needed for the FK",
                    "To save space on the diagram"
                ],
                correct: 0
            },
            {
                category: "Business Rules",
                scenario: "Why is the 'Key Assumptions' section (Part 5 of the guide) critical in a database design project?",
                options: [
                    "It lists the names of the database administrators",
                    "It documents business logic that isn't visually obvious in the ERD itself",
                    "It contains the SQL 'CREATE TABLE' statements",
                    "It is used to list all the sample data for the database"
                ],
                correct: 1
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = false;

        function loadQuestion() {
            answered = false;
            const q = questions[currentQuestion];
            const total = questions.length;
            
            document.getElementById('progress-text').innerText = `Q ${currentQuestion + 1} / ${total}`;
            document.getElementById('progress-bar').style.width = `${((currentQuestion + 1) / total) * 100}%`;
            document.getElementById('category-label').innerText = q.category;
            document.getElementById('scenario-text').innerText = q.scenario;
            document.getElementById('feedback').innerText = "";
            document.getElementById('next-btn').classList.add('hidden');
            
            const optionsList = document.getElementById('options-list');
            optionsList.innerHTML = "";
            
            q.options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "option-card w-full text-left p-4 rounded-xl border-2 border-slate-200 transition-all font-bold text-slate-700 bg-white shadow-sm flex items-start gap-3";
                btn.innerHTML = `<span class="opacity-30">${String.fromCharCode(65 + index)}.</span> <span>${opt}</span>`;
                btn.onclick = () => selectOption(index, btn);
                optionsList.appendChild(btn);
            });
        }

        function selectOption(index, element) {
            if (answered) return;
            answered = true;
            
            const correct = questions[currentQuestion].correct;
            const options = document.querySelectorAll('.option-card');
            
            if (index === correct) {
                element.classList.replace('border-slate-200', 'border-emerald-500');
                element.classList.add('bg-emerald-50', 'text-emerald-800');
                document.getElementById('feedback').innerHTML = "<span class='text-emerald-600'>Correct Answer!</span>";
                score++;
            } else {
                element.classList.replace('border-slate-200', 'border-rose-500');
                element.classList.add('bg-rose-50', 'text-rose-800');
                options[correct].classList.replace('border-slate-200', 'border-emerald-500');
                options[correct].classList.add('bg-emerald-50', 'text-emerald-800');
                document.getElementById('feedback').innerHTML = "<span class='text-rose-600'>Incorrect</span>";
            }
            
            document.getElementById('next-btn').classList.remove('hidden');
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                showResults();
            }
        }

        function showResults() {
            document.getElementById('quiz-container').classList.add('hidden');
            document.getElementById('score-view').classList.remove('hidden');
            document.getElementById('final-score').innerText = `${score}/${questions.length}`;
            
            let msg = "";
            if (score === 10) msg = "Ski-U-Mah! Perfect score. Your conceptual understanding of Database Modeling is outstanding!";
            else if (score >= 8) msg = "Great job, Gopher! You have a strong grasp of business rules and cardinality.";
            else if (score >= 6) msg = "Decent effort. Consider reviewing the differences between Disjoint and Overlapping constraints.";
            else msg = "Looks like you need a bit more study time. Review the core concepts of M:N relationships and Subtypes.";
            
            document.getElementById('score-message').innerText = msg;
        }

        window.onload = loadQuestion;
    </script>
</body>
</html>
